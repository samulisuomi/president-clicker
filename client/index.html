<!DOCTYPE html>
<html>

<head>
    <title>President Clicker</title>
    <style>
        html,
        body {
            height: 100%;
            background-color: #454954;
            margin: 0;
            text-align: center;
            color: pink;
        }

        .flex-container {
            height: 100%;
            width: 100%;
            max-width: 960px;
            padding: 0;
            margin: 0;
            display: flex;
            flex-direction: row;
            flex-wrap: nowrap;
            justify-content: space-around;
            align-items: center;
        }

        .row {
            width: 100%;
            border: 1px solid blue;
            padding: 0;
            margin: 0;
            display: flex;
            flex-direction: row;
            flex-wrap: nowrap;
            justify-content: space-around;
            align-items: center;
        }

        .face {
            max-width: 50%;
            height: 512px;
            flex: 1;
        }

        #hillary {
            background: url("images/hillary.svg");
            background-size: contain;
            background-repeat: no-repeat;
            background-position: center;
        }

        #trump {
            background: url("images/trump.svg");
            background-size: contain;
            background-repeat: no-repeat;
            background-position: center;
        }
    </style>
</head>

<body>
    <h1>President Clicker</h1>
    <p>Trump: <span id="trumpScoreWorld"></span> (everybody), <span id="trumpScore">0</span> (you)</p>
    <p>Hillary: <span id="hillaryScoreWorld"></span> (everybody), <span id="hillaryScore">0</span> (you)</p>
    <div class="flex-container">
        <div class="row">
            <div id="trump" class="face">
            </div>
            <div id="hillary" class="face">
            </div>
        </div>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/1.4.8/socket.io.min.js"></script>
    <script src="http://code.jquery.com/jquery-1.11.1.js"></script>
    <script>
        var socket;
        if (window.location.host != "localhost") {
            socket = io.connect('http://37.139.14.210/presidentclicker/', {
              path: "/presidentclicker"
            });
        } else {
            socket = io("localhost:3000/presidentclicker");
        }

        var trump = document.getElementById("trump");
        var hillary = document.getElementById("hillary");
        var trumpScoreWorld = document.getElementById("trumpScoreWorld");
        var hillaryScoreWorld = document.getElementById("hillaryScoreWorld");
        var trumpScoreWorldCount = -1;
        var hillaryScoreWorldCount = -1;
        var trumpScore = document.getElementById("trumpScore");
        var hillaryScore = document.getElementById("hillaryScore");
        var trumpScoreCount = 0;
        var hillaryScoreCount = 0;

        trump.onclick = function() {
            socket.emit("trump", "1");
            trumpScoreCount++;
            trumpScore.innerHTML = trumpScoreCount;
            if (trumpScoreWorldCount !== -1) {
                trumpScoreWorldCount++;
                trumpScoreWorld.innerHTML = trumpScoreWorldCount;
            }
            return false;
        };

        hillary.onclick = function() {
            socket.emit("hillary", "1");
            hillaryScoreCount++;
            hillaryScore.innerHTML = hillaryScoreCount;
            if (hillaryScoreWorldCount !== -1) {
                hillaryScoreWorldCount++;
                hillaryScoreWorld.innerHTML = hillaryScoreWorldCount;
            }
            return false;
        };

        socket.on("score.trump", function(msg) {
            trumpScoreWorldCount = Number(msg);
            trumpScoreWorld.innerHTML = trumpScoreWorldCount;
        });

        socket.on("score.hillary", function(msg) {
            hillaryScoreWorldCount = Number(msg);
            hillaryScoreWorld.innerHTML = hillaryScoreWorldCount;
        });
    </script>
</body>

</html>
